!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Tartib",[],t):"object"==typeof exports?exports.Tartib=t():e.Tartib=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var l in r)e.o(r,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:r[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>P});const r=document,l=r.documentElement,o=r.body,i="beforebegin",n="afterend",s="start",a="move",c="sort",d="change",{floor:u,abs:p}=Math,_={x:{t:"scrollLeft",l:"scrollWidth",i:"left",u:"right",p:"width"},y:{t:"scrollTop",l:"scrollHeight",i:"top",u:"bottom",p:"height"}},h=(e,t)=>{for(const r in e)Object.hasOwnProperty.call(e,r)&&t(e[r],r)},g=(e,...t)=>Object.assign(e,...t),f={dragFrom:{},cursor:"",elevation:!0,active:"",placeholder:"",dragHandle:"",axis:"",disabled:!1,opacity:1,autoScroll:!0,rtl:!1},m=".tartib__item",b="tartib__item--dragged",y="tartib--elevation",x="tartib__placeholder",v=(e,t,r,l,o,s)=>{let a,c=_[l],d=r>e[l]+.5*e[c.p];return t[l]<r?(d||s)&&(a=o?i:n):d&&!s||(a=o?n:i),a},w=e=>"string"==typeof e,j=(e,t)=>{e.config.disabled=t},B=(e,t,l)=>w(e)?e&&(t||r)["querySelector"+(l?"All":"")](e):e instanceof Element?e:null,I=e=>e&&e.getBoundingClientRect(),D=e=>e.parentElement,O=(e,t)=>{t?h(t,((t,r)=>{e.style[r]=t})):e.style=null},S=(e,t,r)=>{w(t)&&(t=[t]),t.forEach((t=>{(t=w(t)&&t.split(/\s+/)).forEach((t=>{t&&e.classList[r?"remove":"add"](t)}))}))},T=e=>({_(t){S(e,t)},h(t){S(e,t,!0)}}),A=(e,t,r,l,o)=>{let i,{i:n,u:s,t:a,l:c,p:d}=_[l],u=p(e[a]),h=u>0,g=u<e[c]-t[d];(o?g:h)&&r[n]<t[n]?i=n:(o?h:g)&&r[s]>t[s]&&(i=s),i&&(e[a]+=r[i]-t[i])},E=(e,t,r,l,o)=>{var i;t="object"!=typeof(i=t)||null==i||Array.isArray(i)?{}:t;let n,s=I(l||e),a=l?I(e):s,c={};return h(r,((e,r)=>{n=t[r],""===n||isNaN(n)?n=w(n)&&/^\d*.?\d+\s*%$/.test(n.trim())?parseFloat(n)*s[_[r].p]/100:null:n*=1,null!=n?(o&&"x"===r&&(n=s.width-n),n+=s[r]):n=e,c[r]=n-a[r]})),c},F=(e,t,r)=>{t[{[i]:"previous",[n]:"next"}[e]+"ElementSibling"]!==r&&t.insertAdjacentElement(e,r)},H=e=>{const{el:t,config:n,_e:{g:p}}=e,{m:h,v:g}=(e=>({m:e=>e.closest(m),v(){let t=B(m,e,!0),r=[],l=t.length;for(let e=0;e<l;e++){const l=t[e];l.classList.contains(x)||r.push(l)}return r}}))(t),{j:f,B:w}=(()=>{const e=[],t=(e,t)=>{e[0][(t?"remove":"add")+"EventListener"](e[1],e[2])};return{j(r,l,o){let i=[r,l,o];t(i),e.push(i)},B(){e.forEach((e=>{t(e,!0)}))}}})();let j,S,H,P,L,M,N,X,Y,q={},C={},W=!1,$=!1;const k=(e,t,r)=>{X&&(e-=l[_.x.t]),r.y&&(j.style.top=t-C.y+"px"),r.x&&(j.style.left=e-C.x+"px")},z=(e,t)=>t.map((t=>t.getAttribute(e||"id")));return f(t,"pointerdown",(e=>{let{dragHandle:r,dragFrom:i,disabled:s,autoScroll:a,rtl:c,axis:d}=n,{target:u,pointerId:p,clientX:_,clientY:f}=e;j=h(u),s||!j||r&&u!==B(r,j)||(X=c,Y={x:"y"!==d,y:"x"!==d},u.releasePointerCapture(p),S=j.cloneNode(),S.id="",M=g(),P=T(j),q={x:_,y:f},N={el:t,x:0,y:0,target:j,relatedTarget:null,placeholder:S,items:M,getData(e){return z(e,this.items)}},C=E(j,i,q,r?u:null,X),H=a?(e=>{let t=[],r=e.scrollHeight,i=e.scrollWidth;for(;null!==e;){let n=getComputedStyle(e).overflow,{width:s,height:a}=I(e),c=e===l;c&&(a=l.clientHeight),("auto"===n||"scroll"===n||c&&"visible"===n)&&(a<r||s<i)&&e!==o&&t.push(e),e=D(e)}return t})(t):[],$=!0)})),f(r,"pointermove",(e=>{if($){let r,{target:o,clientX:d,clientY:_}=e;if(!W){k(q.x,q.y,{});let{cursor:e,elevation:t,placeholder:r,opacity:o,active:a}=n,{width:c,height:d,x:u,y:_}=I(j);d+="px",c+="px",O(j,{width:c,height:d,opacity:o>0&&o<1&&o}),O(l,{cursor:e}),O(S,{height:d}),p(s,N,{x:u,y:_}),P._([b,t&&y,a]),T(S)._(r||x),F(i,j,S),W=!0}if(k(d,_,Y),L=I(j),r={x:L.x,y:L.y},p(a,N,r,{relatedTarget:o}),((e,t,r)=>{e.forEach((e=>{let o=I(e);if(e===l){let e=l.clientHeight,t=o.width;o={top:0,left:0,right:t,bottom:e,height:e,width:t}}A(e,o,t,"x",r),A(e,o,t,"y",!1)}))})(H,L,X),o=h(o),t.contains(o)&&o!==S){let e,t=I(o),{top:l,right:i,bottom:n,left:s}=I(S),a=d<=u(i)&&d>=u(s)&&Y.y,h=_<=u(n)&&_>=u(l)&&Y.x;!h&&!a&&Y.x&&Y.y?(e=v(t,q,d,"x",X),e=v(t,q,_,"y",!1,e)):(h||(e=v(t,q,_,"y",!1)),a||(e=v(t,q,d,"x",X))),e&&(F(e,o,S),q.y=_,q.x=d,p(c,N,r,{relatedTarget:o,items:g()}))}}})),f(r,"pointerup",(e=>{if($){D(S)===t&&(t.replaceChild(j,S),S=null);let e=g(),r={placeholder:S,items:e};O(j),O(l,{cursor:""}),P.h([b,y,n.active]),M.some(((t,r)=>t!==e[r]))&&p(d,N,r),W&&p("end",N,r),$=W=!1}})),f(r,"pointercancel",(e=>{$=W=!1})),{B:w,I:z,v:g}};class P{static version="1.0.0";static defaults=f;constructor(e,t){const r=this;r.el=B(e),r.config=g({},P.defaults,t),r._e=(()=>{const e={[s]:[],[a]:[],[c]:[],[d]:[],end:[]};return{g(t,...r){e[t].forEach((e=>{e(g({},{type:t},...r))}))},D(t,r){e[t]&&e[t].push(r)},O(t,r){let l=e[t];l?e[t]=r?l.filter((e=>e!==r)):[]:null===t&&h(e,((t,r)=>{e[r]=[]}))}}})(),r._s=H(r)}setOptions(e){g(this.config,e)}on(e,t){this._e.D(e,t)}off(e,t){this._e.O(e,t)}getData(e){let t=this._s;return t.I(e,t.v())}disable(){j(this,!0)}enable(){j(this,!1)}destroy(){const e=this;e._s.B(),h(e,((t,r)=>{delete e[r]}))}}return t=t.default})()));
//# sourceMappingURL=tartib.min.js.map